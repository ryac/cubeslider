/*! CubeSlider - v0.1.0 - 2013-07-22
* https://github.com/ryac/cubeslider
* Copyright (c) 2013 Ryan Yacyshyn; Licensed MIT */
(function(t,i){"use strict";var s=function(){function t(t){var i,s=t.charAt(0).toUpperCase()+t.substr(1),e=(t+" "+n.join(s+" ")+s).split(" "),o=e.length;for(i=0;o>i;i++)if(""===r.style[e[i]])return!0;return!1}var i,s,e="transform,perspective".split(","),n="Webkit,Moz,O,ms".split(","),r=document.createElement("detect"),o={};for(i in e)s=e[i],o[s]=t(s);return o}(),e=function(){var t,i,s="t,webkitT,MozT,msT,OT".split(","),e=document.createElement("div").style,n=s.length;for(i=0;n>i;i++)if(t=s[i]+"ransform",t in e)return s[i].substr(0,s[i].length-1);return!1}(),n=e?"-"+e.toLowerCase()+"-":"",r=function(t){i.console&&i.console.log("CubeSlider:: "+t)},o=function(t){i.console&&i.console.warn("CubeSlider:: "+t)};t.CubeSlider=function(i,s){this.$el=t(s),this._init(i)},t.CubeSlider.defaults={cubeWidth:300,cubeHeight:300,easing:"ease-in-out",speed:.5,element:"div",perspective:800,onTransitionComplete:function(){return!1}},t.CubeSlider.prototype={_init:function(i){var e;return this.options=t.extend(!0,{},t.CubeSlider.defaults,i),this.animating=!1,this.cubeHalfWidth=Math.round(this.options.cubeWidth/2),this.$items=this.$el.find("#cube").children(this.options.element),this.itemsCount=this.$items.length,0===this.itemsCount?(o("no items found.."),!1):(this.supports=s.transform&&s.perspective,this.supports||o("browser may not be supported.."),e={},e.width=this.options.cubeWidth,e.height=this.options.cubeHeight,e.position="relative",this.supports&&(e[n+"perspective"]=this.options.perspective),this.$el.css(e),e={},e.width="100%",e.height="100%",e.position="absolute",this.supports&&(e[n+"transform-style"]="preserve-3d"),this.$el.find("#cube").css(e),this.$items.css({width:this.options.cubeWidth,height:"100%",position:"absolute"}),this.reset(),void 0)},onTransitionEnd:function(t){if(t.originalEvent.propertyName.indexOf("transform")>-1){var i=t.data.self;i.animating=!1,i.$items.not(i.$items.eq(i.current)).css({visibility:"hidden"}),i.options.onTransitionComplete(i.current),i.unbind(i.$items.eq(i.current))}},bind:function(t){t.on("transitionend webkitTransitionEnd",{self:this},this.onTransitionEnd)},unbind:function(t){t.off("transitionend webkitTransitionEnd",this.onTransitionEnd)},next:function(){var t,i=this.current+1;i===this.itemsCount||this.animating||(this.supports?(this.animating=!0,t={},t[n+"transition"]="all "+this.options.speed+"s "+this.options.easing,t[n+"transform"]="rotateY(-90deg) translate3d(-"+this.cubeHalfWidth+"px, 0px, "+this.cubeHalfWidth+"px)",this.$items.eq(this.current).css(t),this.prevItem=this.current,this.current+=1,t={},t.visibility="visible",t[n+"transition"]="all "+this.options.speed+"s "+this.options.easing,t[n+"transform"]="rotateY(0deg) translate3d(0,0,0)",this.$items.eq(this.current).css(t),this.bind(this.$items.eq(this.current))):(t={},t.visibility="hidden",this.$items.eq(this.current).css(t),this.prevItem=this.current,this.current+=1,t.visibility="visible",this.$items.eq(this.current).css(t)))},previous:function(){var t,i=this.current-1;0>i||this.animating||(this.supports?(this.animating=!0,t={},t[n+"transition"]="all "+this.options.speed+"s "+this.options.easing,t[n+"transform"]="rotateY(90deg) translate3d("+this.cubeHalfWidth+"px, 0px, "+this.cubeHalfWidth+"px)",this.$items.eq(this.current).css(t),this.prevItem=this.current,this.current-=1,t={},t.visibility="visible",t[n+"transition"]="all "+this.options.speed+"s "+this.options.easing,t[n+"transform"]="rotateY(0deg) translate3d(0,0,0)",this.$items.eq(this.current).css(t),this.bind(this.$items.eq(this.current))):(t={},t.visibility="hidden",this.$items.eq(this.current).css(t),this.prevItem=this.current,this.current-=1,t.visibility="visible",this.$items.eq(this.current).css(t)))},reset:function(){if(this.animating)return!1;var t;this.current=0,this.supports?(t={},t[n+"transition"]="none",this.$items.css(t),t={},t.visibility="hidden",t[n+"transform"]="rotateY(90deg) translate3d("+this.cubeHalfWidth+"px, 0px, "+this.cubeHalfWidth+"px)",this.$items.not(this.$items.eq(this.current)).css(t),t={},t.visibility="visible",t[n+"transform"]="rotateY(0deg) translate3d(0,0,0)",this.$items.eq(this.current).css(t)):(t={},t.visibility="hidden",this.$items.not(this.$items.eq(this.current)).css(t),t.visibility="visible",this.$items.eq(this.current).css(t))},updateHeight:function(t){this.$el.height(t)}},t.fn.cubeslider=function(i){var s=t.data(this,"cubeslider");return this.each(function(){s?s._init():(s=t.data(this,"cubeslider",new t.CubeSlider(i,this)),r("CubeSlider init.."))}),s}})(jQuery,window);